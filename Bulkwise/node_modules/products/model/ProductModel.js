/**
 * Created by Devaraj on 06/02/2016.
 */


var uuid = require('uuid');
var db = require('dbutil').bucket;



function ProductModel() { };

ProductModel.save = function(data, callback) {

    var jsonObject = {
        type: "com.bulkwise.Products",
        id: data.id,
        display_title: data.title,
        brand_name:data.brand_name,
        short_summary:data.short_summary,
        description:data.description,
        name:data.name,
        img_url:data.img_url,
        is_visible:data.is_visible,
        variants:data.variants,
        product_metafields:data.product_metafields,
        created_at:new Date(),
        udpated_at:new Date(),
        category_id:data.category_id,
        supplier_id:data.supplier_id,
        override_lead_time_for_delivery_in_days:20,
    }
    var documentId = data.document_id ? data.document_id : uuid.v4();

    db.upsert(documentId, jsonObject, function(error, result) {
        if(error) {
            callback(error, null);
            return;
        }
        callback(null, {message: 'success', data: result});
    });
}

module.exports = ProductModel;